INSTRUCCIONES DE INTEGRIDAD: PROYECTO ENCHAPADORA V2.0.0
ESTADO DEL SISTEMA: Código Estable v2.0.0.
ENTORNO DE EJECUCIÓN: Raspberry Pi 4 (Raspbian OS).
HARDWARE CRÍTICO: Control de relés/servos vía GPIO y base de datos SQLite.

1. MISIÓN ÚNICA Y EXCLUSIVA:
Realizar únicamente las modificaciones solicitadas para la integración de [Insertar aquí el cambio específico, ej: nuevas rutas de sensores]. Cualquier ajuste en el manejo de archivos debe usar rutas absolutas basadas en os.path.dirname(os.path.abspath(__file__)) para asegurar que Flask encuentre los archivos independientemente de si se lanza manualmente o como servicio de sistema (systemd).

2. PROHIBICIÓN DE "LIMPIEZA" O REFACTORIZACIÓN:

PROHIBIDO modificar la lógica de control de los pines GPIO. Los tiempos de espera (time.sleep) y secuencias de encendido son críticos para la mecánica de la enchapadora.

PROHIBIDO alterar las rutas de Flask (@app.route) o la lógica de validación de usuarios.

PROHIBIDO cambiar nombres de variables o simplificar funciones que ya están operativas.

3. INTEGRIDAD DE LA ENTREGA (ESTRICTO):

Debes entregar el archivo app.py COMPLETO, desde la primera línea de importación hasta la última línea de ejecución.

NO uses comentarios como "el resto del código sigue igual". La entrega parcial se considera un fallo en la instrucción.

4. MANEJO DE RUTAS Y BASE DE DATOS:
Asegura que la conexión a sqlite3 y las carpetas templates y static utilicen rutas que no dependan del directorio de trabajo actual (cwd), ya que en la Raspberry Pi el script suele ejecutarse desde /home/pi/... y esto suele romper las rutas relativas.

5. REDUNDANCIA DE SEGURIDAD:
Si una función de control o de servidor ya es funcional y estable, NO LA TOQUES. Mi prioridad es la estabilidad operativa de la enchapadora sobre cualquier optimización de código.